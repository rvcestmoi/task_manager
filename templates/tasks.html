{% extends "layout.html" %}

{% block content %}
<h2>Gestion des tâches</h2>

<section class="task-form">
  <h3>Ajouter une tâche</h3>
  <form action="{{ url_for('add_task') }}" method="post">
    <input type="text" name="name" placeholder="Nom de la tâche" required>
    <input type="number" name="frequency" placeholder="Fréquence (heures)" min="1" required>
    <button type="submit">Ajouter</button>
  </form>
</section>

<section class="task-list-admin">
  <h3>Tâches existantes</h3>
  {% for task in tasks %}
    <div class="admin-task">
      <form action="{{ url_for('edit_task', task_id=task.id) }}" method="post">
        <input type="text" name="name" value="{{ task.name }}" required>
        <input type="number" name="frequency" value="{{ task.frequency_hours }}" min="1" required>
        <button type="submit">Modifier</button>
      </form>
      <form action="{{ url_for('delete_task', task_id=task.id) }}" method="post" onsubmit="return confirm('Supprimer cette tâche ?');">
        <button type="submit" class="delete-button">🗑️</button>
      </form>
    </div>
  {% endfor %}
</section>
{% endblock %}
